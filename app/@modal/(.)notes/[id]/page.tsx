import NotePreview from "@/app/@modal/(.)notes/[id]/NotePreview.client";
import { fetchNoteById } from "@/lib/api";

interface NoteModalProps {
  params: Promise<{ id: string }>;
}

export default async function NoteModalPage({ params }: NoteModalProps) {
  const { id } = await params;

  if (!id) {
    console.error("‚ùå –ù–µ—Ç ID –∑–∞–º–µ—Ç–∫–∏");
    return <p>Note ID is missing</p>;
  }

  console.log("üü° [NoteModalPage] –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–º–µ—Ç–∫—É —Å ID:", id);

  // –ü–æ–ª—É—á–∞–µ–º –∑–∞–º–µ—Ç–∫—É –≤–Ω–µ try/catch JSX
  let note;
  try {
    note = await fetchNoteById(id);
  } catch (error) {
    console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–º–µ—Ç–∫–∏:", error);
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π JSX —É–∂–µ –≤–Ω–µ try
    return <p>Note not found</p>;
  }

  // ‚úÖ –¢–µ–ø–µ—Ä—å JSX –≤–Ω–µ –±–ª–æ–∫–∞ try ‚Äî –ª–∏–Ω—Ç–µ—Ä –¥–æ–≤–æ–ª–µ–Ω
  return <NotePreview note={note} />;
}
